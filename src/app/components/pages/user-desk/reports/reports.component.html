<section class="reports">
  <div class="row">
    <div class="col-xl-6 col-sm-12">
      <h4 class="reports-title">
        Report
      </h4>
    </div>
    <div class="col-xl-6 col-sm-12 reports-top-btn mt-1 text-right ">

      <div ngbDropdown class="d-inline-block mr-5 pt-1">
        <a class="hvr-icon-forward" id="dropdownBasic1" ngbDropdownToggle>
          <img src="../../../../../assets/images/icons/Icons_Calendar.svg" alt="icon" class="icon-size-16 mr-2">
          <span class="link-hover-1 mr-2">{{reportPeriodDesc}}</span>
        </a>
        <ul ngbDropdownMenu aria-labelledby="dropdownBasic1">
          <li *ngFor="let period of periodList" (click)="onPeriodChange(period.codeVal, period.codeValDesc)" class="dropdown-item">{{period.codeValDesc}}</li>
        </ul>
      </div>

      <a href="javascript:;" class="hvr-icon-forward mr-5">
        <img src="../../../../../assets/images/icons/icon_print.svg" alt="icon" class="icon-size-16 mr-2">
        <span class="link-hover-1">Print</span>
      </a>
      <a href="javascript:;" class="hvr-icon-forward">
        <img src="../../../../../assets/images/icons/icon_share_blue.svg" alt="icon" class="icon-size-16 mr-2">
        <span class="link-hover-1">Share</span>
      </a>
    </div>
  </div>
  <hr class="hr-solid mt-2">
  <!-- Total Spend Section -->


  <div class="row pt-4 pl-0 pr-0" *ngIf="isCurrVsPrev">

    <div class="col-12">
      <h4 class="totalspend-title mt-3 mb-2">Total Revenue</h4>
    </div>
    <div class="totalspend-section-boxes col-xl-6 col-md-6 col-sm-12 ">

      <div class="totalspendbox totalspend-summary mt-3">
        <div class="totalspend-icon">
          <img src="../../../../../assets/images/icons/icon_booking_current.svg">
        </div>
        <div class="totalspend-box-title">
          <h5>{{userGraphData?.currentVsPrevious[0]?.title}}</h5>
        </div>
        <div class="totalspend-quantity">
          <span class="currency">{{userGraphData?.currentVsPrevious[0]?.currencyCode}}</span>
          <span class="spends text-truncate" placement="top" ngbTooltip="{{userGraphData?.currentVsPrevious[0]?.currencyCode}} {{userGraphData?.currentVsPrevious[0]?.totalAmount | number: '1.2-2'}}">{{userGraphData?.currentVsPrevious[0]?.totalAmount | number: '1.2-2'}}</span>
          <span [ngClass]="(userGraphData?.currentVsPrevious[0]?.amountComp < 0)?'status-down':'status-up'">
            <img *ngIf="userGraphData?.currentVsPrevious[0]?.amountComp < 0" src="../../../../../assets/images/icons/icon-status-down.svg">
            <img *ngIf="userGraphData?.currentVsPrevious[0]?.amountComp >= 0" src="../../../../../assets/images/icons/icon-status-up.svg"> {{userGraphData?.currentVsPrevious[0]?.amountComp | number: '1.2-2'}} %
          </span>
        </div>
        <div class="bookings">{{userGraphData?.currentVsPrevious[0]?.totalBooking | number: '1.0-0'}} Bookings</div>
      </div>
    </div>
    <!-- Spend Col 2 -->
    <div class="totalspend-section-boxes col-xl-6 col-md-6 col-sm-12 pl-5">

      <div class=" totalspendbox totalspend-summary mt-3 border-right-0">
        <div class="totalspend-icon">
          <img src="../../../../../assets/images/icons/icon_booking_current.svg">
        </div>
        <div class="totalspend-box-title">
          <h5>{{userGraphData?.currentVsPrevious[1]?.title}}</h5>
        </div>
        <div class="totalspend-quantity">
          <span class="currency">{{userGraphData?.currentVsPrevious[1]?.currencyCode}}</span>
          <span class="spends text-truncate" placement="top" ngbTooltip="{{userGraphData?.currentVsPrevious[0]?.currencyCode}} {{userGraphData?.currentVsPrevious[0]?.totalAmount
          | number: '1.2-2'}}">{{userGraphData?.currentVsPrevious[1]?.totalAmount | number: '1.2-2'}}</span>
        </div>
        <div class="bookings">{{userGraphData?.currentVsPrevious[1]?.totalBooking | number: '1.0-0'}} Bookings</div>
      </div>
    </div>

    <div class="totalspend-summery" style="min-height: 210px" *ngIf="!isCurrVsPrev">
      <app-loader-main></app-loader-main>
    </div>
  </div>



<div class="row">
  <div class="col-12">
  <div class="mt-4" *ngIf="isBarGraph">
    <div echarts [options]="userBarGraph" class="demo-chart"></div>
  </div>
  <div class="mt-4 position-relative" *ngIf="!isBarGraph" style="min-height: 415px">
    <app-loader-main></app-loader-main>
  </div>
  </div>
</div>
  <hr class="hr-solid mt-2">
  <!-- Total Bookings By Region Section -->

  <div class="row ">
    <div class="by-map col-md-7 col-xl-7 col-sm-12 pt-4">
      <h4 class="totalBookings-title mt-4">Total Bookings by Region</h4>
    </div>
    <div class="by-volume col-md-5 col-xl-5 col-sm-12 pt-4 text-right">
      <div class="mt-0">
        <div class="d-flex justify-content-between">
          <h4 class="totalBookings-title mt-4 mb-0">VOLUME %</h4>
          <div ngbDropdown class="d-inline-block mr-0 mt-4 pull-right">
            <a class="hvr-icon-forward" id="dropdownBasic2" ngbDropdownToggle>
              <span class="link-hover-1 mr-2">{{imp_ExpType.toUpperCase()}}</span>
            </a>
            <ul ngbDropdownMenu aria-labelledby="dropdownBasic2">
              <li class="dropdown-item" (click)="onImp_Exp('import')">Import</li>
              <li class="dropdown-item" (click)="onImp_Exp('export')">Export</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="col-7">
        <div class="pt-4">
            <hashmove-data-map *ngIf="isRegionMap" [data]="mapData" [currencyCode]="'AED'"></hashmove-data-map>
            <div *ngIf="!isRegionMap" style="min-height: 480px">
              <app-loader-main></app-loader-main>
            </div>
          </div>
    </div>
    <div class="col-5">
        <div *ngIf="isRegionMap" echarts [options]="userRegionBarGraph" [theme]="theme" class="demo-chart"></div>
        <div *ngIf="!isRegionMap" style="min-height: 480px">
          <app-loader-main></app-loader-main>
        </div>
    </div>

    </div>

  <div class="row comparision-section">
    <div class="col-6 customer-revenue">
        <h4 class="totalBookings-title mt-2">Top Customers By Revenue</h4>
      <div  *ngIf="topCustomers && topCustomers.length">
      
      <div class="d-flex pt-3" *ngFor="let customer of topCustomers">
        <div class="customer-image mr-2">
          <img *ngIf="customer.customerImage" [src]="baseExternalAssets +'/'+ customer.customerImage">
          <img *ngIf="!customer.customerImage" src="../../../../../assets/images/placeholder_image.png">
        </div>
        <ul class="customer">
          <li>
            <span>{{customer.customerName}}</span>
          </li>
          <li>
            {{customer.currencyCode}}
            <strong class="ml-2">{{customer.customerRevenue | number: '1.2-2'}}</strong>
          </li>
          <li>
            <small class="text">Last booking made on {{customer.lastBookingDate | date : "d MMM y"}} {{customer.lastBookingDate | date : "H:mm"}}</small>
          </li>
        </ul>
      </div>
      <div class="view_link">
        <a class="hvr-icon-forward grey-anc-btn mt-3" href="javascript:;">
          <span class="link-hover-grey">View more </span>
          <img src="../../../../../assets/images/icons/icon_arrow_right.svg" alt="icon" class="icon-size-14 hvr-icon mb-1">
        </a>
      </div>      
    </div>
    <div class="justify-content-center d-flex align-items-center no-record" *ngIf="!topCustomers || (topCustomers && !topCustomers.length)">
      <h4 class="totalBookings-title mt-0 mb-0">No Data to Show</h4>
    </div>
  </div>
    <div class="booking-comparision col-md-6 col-xl-6 col-sm-12 pt-3">
      <h4 class="totalBookings-title pt-3 mt-4">Booking Type Comparision</h4>
      <div class="mt-0">
        <div *ngIf="isTypeCompare" echarts [options]="userPieChart" [theme]="theme" class="demo-chart"></div>
        <div *ngIf="!isTypeCompare" style="min-height: 490px">
          <app-loader-main></app-loader-main>
        </div>
      </div>
    </div>
  </div>
  <div class="recent-bookings ">
    <h4 class="totalBookings-title mt-4">Recent Bookings</h4>
  </div>
  <div class="bookings overflow-hidden" *ngIf="recentBookings && recentBookings.length">
    <div class="card animated bounceInDown pointer mt-2 mb-3" *ngFor="let booking of recentBookings" (click)="viewBookingDetails(booking.BookingID)">
      <div class="card-body pt-2">
        <!-- booking top row -->
        <div class="bookings-header d-md-flex justify-content-md-between">
          <div class="d-flex bookings-header-number">
            <img src="../../../../../assets/images/icons/icon_pin_sea.svg">
            <div class="d-flex flex-column info">
              <span>{{booking.HashMoveBookingNum}}</span>
              <small>Booked on {{booking.HashMoveBookingDate | date : "d MMM y"}} {{booking.HashMoveBookingDate | date : "H:mm"}}</small>
            </div>
          </div>
          <div class="d-flex mt-1 bookings-header-company">
            <img [src]="baseExternalAssets +'/'+ booking.CarrierImage">
            <span>{{booking.CarrierName}}</span>
          </div>
        </div>
        <hr class="hr-solid mt-1">
        <!-- booking top row -->

        <!-- booking bottom row -->
        <div class="row">
          <div class="col-lg-6 col-sm-12 border-separated">
            <div class="row">
              <div class="col-6">
                <div class="bookings-detail angle-arrow eq-height d-flex justify-content-between flex-column">
                  <div class="ports">
                    <small class="d-block mb-2">From</small>
                    <label class="ports-label mt-1">{{booking.PolCode}}</label>
                    <span class="d-block mb-2">Port of {{booking.PolCountry}}</span>
                  </div>
                  <div class="ports-calendar">
                    <span>
                      <img src="../../../../../assets/images/icons/Icons_Calendar.svg" class="icon-size-16 mr-2 mb-1"> {{booking.EtdLcl | date : "d MMM, yyyy"}}
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-6">
                <div class="bookings-detail eq-height d-flex justify-content-between flex-column">
                  <div class="ports">
                    <small class="d-block mb-2">to</small>
                    <label class="ports-label mt-1">{{booking.PodCode}}</label>
                    <span class="d-block mb-2">Port of {{booking.PodCountry}}</span>

                  </div>
                  <div class="ports-calendar">
                    <span>
                      <img src="../../../../../assets/images/icons/Icons_Calendar.svg" class="icon-size-16 mr-2 mb-1"> {{booking.EtaLcl | date : "d MMM, yyyy"}}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-sm-12 mt-1 pl-4 border-separated">
            <div class="bookings-detail">
              <div class="ports">
                <small class="d-block">CUSTOMER</small>
                <div class="d-flex">
                  <div class="customer-image mt-1 mr-2">
                    <img [src]="baseExternalAssets + booking.CustomerLogo" alt="logo" />
                  </div>
                  <label class="ports-label mt-1">
                    {{booking.CustomerName}}
                  </label>
                </div>
                <small class="d-block pt-2 mb-1 mt-3">DOCUMENT STATUS</small>
                <span class="docstatus" [ngClass]="booking.DocumentStatus | lowercase">{{booking.DocumentStatus | lowercase}}</span>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-sm-12 mt-1 pl-4">
            <div class="bookings-detail">
              <div class="ports">
                <small class="d-block mb-2">Price</small>
                <label class="ports-label mt-1" ngbTooltip="{{booking.CurrencyCode}} {{booking.BookingTotalAmount | number: '1.2-2'}}">
                  {{booking.CurrencyCode}} {{booking.BookingTotalAmount | number:'1.2-2'}}
                </label>
                <small class="d-block pt-2 mt-4 mb-1">SHIPPING STATUS</small>
                <span class="secondary">{{booking.ShippingStatus}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="overflow-hidden" *ngIf="recentBookings && !recentBookings.length">
    <div class="animated bounceInDown card text-center p-1">
      <p class="mb-0">You don't have any bookings yet </p>
    </div>
  </div>

</section>